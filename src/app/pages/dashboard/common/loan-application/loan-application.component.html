<div class="col-md-6 offset-md-0" *ngIf="isShowModal">
  <nb-card class="card-width">
    <nb-card-body>
      <nb-stepper #stepper>
        <nb-step [stepControl]="firstForm" label="">
          <form [formGroup]="firstForm" class="step-container">
            <h4 class="headings">Personal Information</h4>
            <p class="lorem">Please provide the following information.</p>

            <div class="form-group">
              <label class="label" for="input-fullname">First Name</label>
              <input nbInput size="large" type="text" placeholder="Enter your name" class="form-control size-large"
                formControlName="fullname" readonly
                [ngClass]="{'form-control-danger': firstForm.invalid && (firstForm.dirty || firstForm.touched)}">
            </div>
            <div class="form-group mt-2">
              <label class="label" for="input-email">Email</label>
              <input nbInput size="large" type="text" placeholder="Enter your name" class="form-control size-large"
                formControlName="email" readonly
                [ngClass]="{'form-control-danger': firstForm.invalid && (firstForm.dirty || firstForm.touched)}">
            </div>
            <div class="form-group mt-2">
              <label class="label" for="input-employment">Employment Status</label>
              <nb-select fullWidth placeholder="Employment Status" formControlName="employmentStatus">
                <nb-option value="">Employment Status</nb-option>
                <nb-option value="{{job.value}}" *ngFor="let job of employments">{{job.label}}</nb-option>
              </nb-select>
            </div>

            <div class="form-group mt-2">
              <label class="label" for="input-employer">Employer</label>
              <input nbInput type="text" placeholder="Enter your name" class="form-control size-large"
                formControlName="employer"
                [ngClass]="{'form-control-danger': firstForm.invalid && (firstForm.dirty || firstForm.touched)}">
            </div>
            <br>
            <div class="row">
              <div class="col-3">
                <button nbButton nbStepperPrevious>Prev</button>
              </div>
              <div class="col-9">
                <button nbButton type="button" (click)="onFirstSubmit()" fullWidth status="primary"
                  nbStepperNext>Next</button>
              </div>
            </div>
          </form>
        </nb-step>
        <nb-step [stepControl]="secondForm" label="">
          <form [formGroup]="secondForm" class="step-container">
            <h4 class="headings">Loan Details</h4>
            <p class="lorem">Please provide the following information.</p>

            <div class="form-groups">
              <label class="label" for="input-loan-type">Loan Type</label>
              <nb-select fullWidth placeholder="Select Loan Tenure" required="true" [(selected)]="selectedProduct"
                formControlName="productType">
                <nb-option value="">Select Product</nb-option>
                <nb-option [value]="product['id']"
                  *ngFor="let product of loanProducts">{{product['productName']}}</nb-option>
              </nb-select>
            </div>
            <div class="form-groups">
              <label class="label" for="input-amount">Loan Amount</label>
              <input nbInput type="text" placeholder="Enter Loan Amount" class="form-control size-large"
                formControlName="amount" (keyup)="numberFormatComma()"
                [ngClass]="{'form-control-danger': secondForm.invalid && (secondForm.dirty || secondForm.touched)}">
            </div>
            <div class="form-group mt-2">
              <label class="label" for="input-laontenure">Repayment Tenure (Months)</label>
              <nb-select fullWidth placeholder="Select Loan Tenure" [(selected)]="selectedMonth" required="true"
                formControlName="tenure">
                <nb-option value="">Select Month</nb-option>
                <nb-option [value]="month.value" *ngFor="let month of months">{{month.label}}</nb-option>
              </nb-select>
            </div>
            <!-- <div class="form-group mt-2">
              <label class="label" for="input-password">Monthly Repayment Date</label>
              <input nbInput type="text" placeholder="Monthly Repayment Date" class="form-control size-large"
                formControlName="paymentDate"
                [nbDatepicker]="dateTimePicker"
                 [ngClass]="{'form-control-danger': secondForm.invalid && (secondForm.dirty || secondForm.touched)}">
                <nb-datepicker #dateTimePicker [filter]="filterFn"></nb-datepicker>
            </div> -->

            <br>
            <div class="row">
              <div class="col-3">
                <button nbButton nbStepperPrevious>Prev</button>
              </div>
              <div class="col-9">
                <button nbButton type="button" (click)="onSecondSubmit()" fullWidth status="primary"
                  nbStepperNext>Next</button>
              </div>
            </div>
          </form>
        </nb-step>
        <nb-step [stepControl]="thirdForm" label="">
          <form [formGroup]="thirdForm" class="step-container">
            <h4 class="headings">KYC</h4>
            <p class="lorem">Please provide any of the following documents.</p>

            <div class="form-group">
              <label class="label" for="input-address">Proof of Address</label>
              <input nbInput type="file" placeholder="Enter favorite movie" class="form-control size-large file-field"
                formControlName="address" (change)="onChangeFile($event, 'address')"
                [ngClass]="{'form-control-danger': thirdForm.invalid && (thirdForm.dirty || thirdForm.touched)}">
            </div>
            <div class="form-group">
              <label class="label" for="input-employment">Proof of Employment</label>
              <input nbInput type="file" placeholder="Enter favorite movie" class="form-control size-large file-field"
                formControlName="pofEmployment" (change)="onChangeFile($event, 'employement')"
                [ngClass]="{'form-control-danger': thirdForm.invalid && (thirdForm.dirty || thirdForm.touched)}">
            </div>
            <div class="form-group">
              <label class="label" for="input-identity">Proof of Identity</label>
              <input nbInput type="file" placeholder="Enter favorite movie" class="form-control size-large file-field"
                formControlName="pofIdentity" (change)="onChangeFile($event, 'identity')"
                [ngClass]="{'form-control-danger': thirdForm.invalid && (thirdForm.dirty || thirdForm.touched)}">
            </div>
            <div class="row">
              <div class="col-3">
                <button nbButton nbStepperPrevious>Prev</button>
              </div>
              <div class="col-9">
                <button nbButton type="button" (click)="onThirdSubmit()" nbStepperNext fullWidth
                  status="primary">Submit</button>
              </div>
            </div>
          </form>
        </nb-step>
        <nb-step [stepControl]="thirdForm" [hidden]="true" label="">
          <div class="step-container">
            <div class="col mx-auto">
              <nb-alert *ngIf="errors?.length && !submitted" outline="danger" role="alert">
                <p class="alert-title"><b>Oh snap!</b></p>
                <ul class="alert-message-list px-0">
                  <li *ngFor="let error of errors" class="alert-message">{{ error }}</li>
                </ul>
              </nb-alert>
              <div [nbSpinner]="submitted" size="large"></div>
              <nb-alert *ngIf=" messages?.length && !submitted" outline="success" role="alert">
                <img src="assets/icons/complete_loan.png" class="img img-responsive position-center" alt="">

                <ul class="alert-message-list mt-4">
                  <li *ngFor="let message of messages" class="alert-message">{{ message }}</li>
                </ul>
              </nb-alert>
            </div>
            <br>
            <button nbButton type="button" (click)="complete()" fullWidth status="primary">Close</button>

          </div>
        </nb-step>
      </nb-stepper>
    </nb-card-body>
  </nb-card>
</div>